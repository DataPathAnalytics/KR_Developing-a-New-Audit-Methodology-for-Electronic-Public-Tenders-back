<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1" author="andrey_pylypchuk">
        <dropColumn columnName="impact" tableName="indicator"/>
    </changeSet>

    <changeSet id="2" author="andrey_pylypchuk">
        <addColumn tableName="indicator">
            <column name="description" type="text"/>
        </addColumn>
    </changeSet>

    <changeSet id="3" author="andrey_pylypchuk">
        <sql>
            UPDATE indicator SET description = 'Повторная закупка методом прямого заключения договора на приобретения товаров, работ и услуг по каждой статье расходов один раз в год до минимальной пороговой суммы.' WHERE id = 1;
            UPDATE indicator SET description = 'Дробление. Заключение прямого договора с разными причинами (одно и то же наименование ОКГЗ но указывает разные причины применения закупки методом прямого заключения договора )' WHERE id = 2;
            UPDATE indicator SET description = 'Закупка товаров методом прямого заключения договора превышает 15% стоимости договора, заключенного на основании проведенного конкурса при сохранении цены и технических спецификаций.' WHERE id = 3;
            UPDATE indicator SET description = 'Закупка товаров методом прямого заключения договора по причине дозакупки товаров, если общая стоимость не превышает 15% от проведенного конкурса, но цена и техническая спецификация не сохранены.' WHERE id = 4;
            UPDATE indicator SET description = 'Закупка товаров методом прямого заключения договора по причине дозакупки товаров, если общая стоимость не превышает 15% от проведенного конкурса, но процедура конкурса отсутствует.' WHERE id = 5;
            UPDATE indicator SET description = 'Закупка работ и услуг методом прямого заключения договора превышает 25% стоимости договора, заключенного на основании проведенного конкурса при сохранении цены и технических спецификаций.' WHERE id = 6;
            UPDATE indicator SET description = 'Закупка работ и услуг методом прямого заключения договора по причине дозакупки товаров, если общая стоимость не превышает 25% от проведенного конкурса, но подрядчик и техническая спецификация не сохранены.' WHERE id = 7;
            UPDATE indicator SET description = 'Закупка работ и услуг методом прямого заключения договора по причине дозакупки товаров, если общая стоимость не превышает 25% от проведенного конкурса, но процедура конкурса отсутствует.' WHERE id = 8;
            UPDATE indicator SET description = 'Не правомерное применение закупки методом прямого заключения договора по причине Статья 21. п. 4, п.п. 5. (Приобретения товаров, работ и услуг у производителей или у конкретного поставщика (подрядчика), который обладает интеллектуальными или исключительными правами в отношении данных товаров, работ и услуг, и нет возможности применить другой метод закупок)' WHERE id = 9;
            UPDATE indicator SET description = 'Не правомерное применение закупки методом прямого заключения договора по причине Статья 21. п. 4, п.п. 7.  ( если проводимые конкурсы были признаны несостоявшимися и повторное проведение конкурса с учетом пересмотренных требований конкурсной документации не привело к заключению договора)' WHERE id = 10;
            UPDATE indicator SET description = 'Закупающая организация проводит закупку с указанием цены за единицу товара которая сильно (более 20%) отличается от средней цены за аналогичный товар по системе. (индикатор будет применятся к закупке товаров широкого применения)' WHERE id = 11;
            UPDATE indicator SET description = 'Закупающая организация не достаточно подробно описала предмет закупок технические, качественные характеристики закупаемых товаров, работ или услуг.
            (отсутствие дополнительной документации включая технические спецификации, проектно-сметную документацию на весь объем строительства, государственные экспертизы по проектно-техническим решениям, планы, чертежи и эскизы)' WHERE id = 12;
            UPDATE indicator SET description = 'Закупающая организация использует метод "конкурс упрощенным методом" с превышением установленных законом максимальной пороговой суммы.' WHERE id = 13;
            UPDATE indicator SET description = 'Закупающая организация не предоставила ответ на запрос о разъяснении по положениям конкурсной документации в течении трех дней.' WHERE id = 14;
            UPDATE indicator SET description = 'Договор подписан до семи рабочих дней при проведении конкурса одноэтапным и двухэтапным методами' WHERE id = 15;
            UPDATE indicator SET description = 'Договор подписан до двух рабочих дней при проведении конкурса упрощенным методом и методом на понижение цены.' WHERE id = 16;
            UPDATE indicator SET description = 'Сумма всех заключенных контрактов по лотам в закупке превышает сумму всех выигравших конкурсных заявок.' WHERE id = 17;
            UPDATE indicator SET description = 'Закупающая организация разместила на веб-портале государственных закупок информацию о закупке методом прямого заключения договора позднее двух рабочих дней до проведения закупки.' WHERE id = 18;
            UPDATE indicator SET description = 'Объявление процедуры для закупки товаров, услуг и работ по классификатору ОКГЗ, одновременно с ранее объявленной аналогичной закупкой по которой еще не определена выигравшая конкурсная заявка.
            (с намерением отмены "не угодной" процедуры)' WHERE id = 19;
            UPDATE indicator SET description = 'Закупающая организация провела закупку методом прямого заключения по причине "возникновения срочной необходимости в проведении закупок ежедневно потребляемых товаров в связи с обстоятельствами, которые не предвидела закупающая организация" но обязательный конкурса в течение месяца со дня возникновения указанных обстоятельств проведен не был.' WHERE id = 20;
            UPDATE indicator SET description = 'Закупающая организация указала ограниченное количество квалификационных требований (только два обязательных).' WHERE id = 21;
            UPDATE indicator SET description = 'Закупающая организация указала ограниченное количество квалификационных требований (только два обязательных) плюс "другое".' WHERE id = 22;
            UPDATE indicator SET description = 'Закупающая организация запросила слишком много квалификационных требований (для данного предмета закупки)' WHERE id = 23;
            UPDATE indicator SET description = 'Закупщик запросил слишком много квалификационных требований (больше чем в среднем по данному виду закупок) в добавок указал собственное требование (другое)' WHERE id = 24;
            UPDATE indicator SET description = 'При закупке услуг и товаров произведенных в результате деятельности подлежащей обязательному лицензированию, закупающая организация не запрашивает у поставщиков соответствующих лицензий' WHERE id = 25;
            UPDATE indicator SET description = 'Применение закупки методом прямого заключения договора с одним и тем же поставщиком по причине приобретения товаров, работ и услуг по каждой статье расходов один раз в год до минимальной пороговой суммы, используя похожие статьи ОКГЗ.' WHERE id = 26;
            UPDATE indicator SET description = 'В закупке принимают участия поставщики (подрядчики) в одинаковыми контактными данными.' WHERE id = 27;
            UPDATE indicator SET description = 'Поставщик (подрядчик) никогда не побеждал в конкурсных процедурах других закупающих организаций' WHERE id = 28;
            UPDATE indicator SET description = 'Все участники лота были дисквалифицированы, кроме победителя (4+ участника)' WHERE id = 29;
            UPDATE indicator SET description = 'Один участник выиграл все лоты в многолотовой (5+) процедуре, где были дисквалификации' WHERE id = 30;
            UPDATE indicator SET description = 'Незавершенная процедура - закупающая организация провела конкурс и определила победителя но процедуру в системе не завершила. (30+ дней)' WHERE id = 31;
            UPDATE indicator SET description = 'Процедура закупки с удовлетворенными жалобами.' WHERE id = 32;
        </sql>
    </changeSet>

    <changeSet id="4" author="andrey_pylypchuk">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="okgz"/>
            </not>
        </preConditions>

        <createTable tableName="okgz">
            <column name="code" type="text"/>
            <column name="original_code" type="text"/>
            <column name="name" type="text"/>
            <column name="parent" type="text"/>
        </createTable>

        <addPrimaryKey tableName="okgz" columnNames="code" constraintName="pk_okgz"/>
    </changeSet>

    <changeSet id="5" author="andrey_pylypchuk">
        <sql>
            UPDATE indicator SET description = 'Дробление. Заключение прямого договора с разными причинами (одно и то же наименование ОКГЗ но указывает разные причины применения закупки методом прямого заключения договора).' WHERE id = 2;
            UPDATE indicator SET description = 'Не правомерное применение закупки методом прямого заключения договора по причине Статья 21. п. 4, п.п. 5. (Приобретения товаров, работ и услуг у производителей или у конкретного поставщика (подрядчика), который обладает интеллектуальными или исключительными правами в отношении данных товаров, работ и услуг, и нет возможности применить другой метод закупок).' WHERE id = 9;
            UPDATE indicator SET description = 'Не правомерное применение закупки методом прямого заключения договора по причине Статья 21. п. 4, п.п. 7. (если проводимые конкурсы были признаны несостоявшимися и повторное проведение конкурса с учетом пересмотренных требований конкурсной документации не привело к заключению договора).' WHERE id = 10;
            UPDATE indicator SET description = 'Закупающая организация проводит закупку с указанием цены за единицу товара которая сильно (более 20%) отличается от средней цены за аналогичный товар по системе. (индикатор будет применятся к закупке товаров широкого применения).' WHERE id = 11;
            UPDATE indicator SET description = 'Закупающая организация не достаточно подробно описала предмет закупок технические, качественные характеристики закупаемых товаров, работ или услуг. (отсутствие дополнительной документации включая технические спецификации, проектно-сметную документацию на весь объем строительства, государственные экспертизы по проектно-техническим решениям, планы, чертежи и эскизы).' WHERE id = 12;
            UPDATE indicator SET description = 'Договор подписан до семи рабочих дней при проведении конкурса одноэтапным и двухэтапным методами.' WHERE id = 15;
            UPDATE indicator SET description = 'Объявление процедуры для закупки товаров, услуг и работ по классификатору ОКГЗ, одновременно с ранее объявленной аналогичной закупкой по которой еще не определена выигравшая конкурсная заявка. (с намерением отмены "не угодной" процедуры).' WHERE id = 19;
            UPDATE indicator SET description = 'Закупающая организация запросила слишком много квалификационных требований (для данного предмета закупки).' WHERE id = 23;
            UPDATE indicator SET description = 'Закупщик запросил слишком много квалификационных требований (больше чем в среднем по данному виду закупок) в добавок указал собственное требование (другое).' WHERE id = 24;
            UPDATE indicator SET description = 'При закупке услуг и товаров произведенных в результате деятельности подлежащей обязательному лицензированию, закупающая организация не запрашивает у поставщиков соответствующих лицензий.' WHERE id = 25;
            UPDATE indicator SET description = 'Поставщик (подрядчик) никогда не побеждал в конкурсных процедурах других закупающих организаций.' WHERE id = 28;
            UPDATE indicator SET description = 'Все участники лота были дисквалифицированы, кроме победителя (4+ участника).' WHERE id = 29;
            UPDATE indicator SET description = 'Один участник выиграл все лоты в многолотовой (5+) процедуре, где были дисквалификации.' WHERE id = 30;
            UPDATE indicator SET description = 'Незавершенная процедура - закупающая организация провела конкурс и определила победителя но процедуру в системе не завершила. (30+ дней).' WHERE id = 31;
        </sql>
    </changeSet>

    <changeSet id="6" author="andrey_pylypchuk">
        <addColumn tableName="auditor">
            <column name="tender_value_rank" type="real" defaultValue="0.5"/>
            <column name="tender_risk_level_rank" type="real" defaultValue="0.5"/>
            <column name="buyer_value_rank" type="real" defaultValue="0.5"/>
            <column name="buyer_risk_level_rank" type="real" defaultValue="0.5"/>
        </addColumn>
    </changeSet>

</databaseChangeLog>